(this["webpackJsonphabit-tracker"]=this["webpackJsonphabit-tracker"]||[]).push([[0],{164:function(e,t,n){e.exports=n(223)},169:function(e,t,n){},177:function(e,t,n){},223:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(16),i=n.n(c),o=(n(169),n(18)),u=n(21),s=n(270),l=n(139),b=n.n(l),d=n(138),f=n.n(d),p=n(260),m=n(283),v=n(287),h=n(266),O=n(264),j=n(263),x=n(25),E=n(30),g=function(e,t){return"SET"===t.type?Object(E.a)(Object(E.a)({},e),{},Object(x.a)({},t.field,t.payload)):"RESET"===t.type?{}:void 0};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useReducer)(g,e),n=Object(u.a)(t,2),r=n[0],c=n[1],i=function(e){var t=e.target;return c({type:"SET",field:t.name,payload:t.value})},o=function(){return c({type:"RESET"})};return{formState:r,updateField:i,resetForm:o}},y=n(148),k=n(82),S=n.n(k),C=n(43),I=n(71);var H=function(e){var t=e.name,n=e.initialState,a=void 0===n?{}:n,r=e.reducers,c=void 0===r?{}:r,i=e.routines,o=void 0===i?{}:i,u=e.routineReducers,s=void 0===u?S.a:u,l=e.extraReducers,b=void 0===l?{}:l,d=Object(y.a)(e,["name","initialState","reducers","routines","routineReducers","extraReducers"]);if("function"!==typeof s)throw new Error("routineReducers must be a function that returns a reducerMap");var f=Object.keys(o),p=f.reduce((function(e,n){return e[n]=Object(I.a)("".concat(t,"/").concat(o[n])),e}),{}),m=f.reduce((function(e,t){var n=p[t];return e[t]=Object(I.b)(n),e}),{}),v=Object(C.b)(Object(E.a)({name:t,reducers:c,initialState:a,extraReducers:Object(E.a)(Object(E.a)({},b),s(p))},d));return v.routines=p,v.promisifiedRoutines=m,v},N=H({name:"habits",initialState:{},reducers:{updateHabit:function(e,t){var n=t.payload,a=n.habit,r=n.id;e[r]=Object(E.a)(Object(E.a)({},e[r]),a)},addHabit:function(e,t){var n=t.payload,a=n.habit;e[n.id]=a},deleteHabit:function(e,t){delete e[t.payload.id]}},routines:{updateHistory:"UPDATE_HISTORY",createHabit:"CREATE_HABIT",updateHabit:"UPDATE_HABIT",deleteHabit:"DELETE_HABIT",fetchHabit:"FETCH_HABIT",swapHabit:"SWAP_HABIT"},routineReducers:function(e){return Object(x.a)({},e.createHabit.SUCCESS,(function(e,t){var n=t.payload,a=n.habit;e[n.id]=a}))}}),U=n(17),R=N.routines;var T=function(){var e=Object(U.d)();return Object(a.useCallback)((function(t){var n=t.habitName;e(R.createHabit.trigger({habitName:n}))}),[e])},D=n(38),A=function(e){return e.session},F=Object(D.a)(A,(function(e){return Boolean(e.user.uid)})),G=function(){return Object(U.e)(F)};function P(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],i=w(),o=i.formState,s=i.updateField,l=i.resetForm,b=T(),d=G(),f=Object(a.useCallback)((function(){c(!0)}),[]),x=Object(a.useCallback)((function(){c(!1)}),[]);return d?r.a.createElement("div",null,r.a.createElement(p.a,{onClick:f},"Create Habit"),r.a.createElement(v.a,{open:n,onClose:x,"aria-labelledby":"create-habit-title"},r.a.createElement(j.a,{id:"create-habit-title"},"Create Habit"),r.a.createElement(O.a,null,r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"habitName",name:"habitName",value:o.habitName||"",onChange:s,label:"Habit Name",type:"text",fullWidth:!0})),r.a.createElement(h.a,null,r.a.createElement(p.a,{onClick:x},"Cancel"),r.a.createElement(p.a,{onClick:function(e){b(o),l(),x()}},"Create")))):null}var W=n(274),q=n(265),L=n(272),B=n(289),M=n(275),z=n(288),J=n(151),_=n(273),K=n(152),Y=n(271);var V=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],i=Object(a.useCallback)((function(){c(!r)}),[r]);return[r,i,c]},X=H({name:"session",initialState:{user:{},userSettings:{habitIds:[]}},reducers:{setCurrentUser:function(e,t){e.user=t.payload.user},setUserSettings:function(e,t){e.userSettings=t.payload.userSettings}},routines:{login:"LOGIN",logout:"LOGOUT",createUser:"CREATE_USER"},routineReducers:function(e){var t;return t={},Object(x.a)(t,e.logout.SUCCESS,(function(e){e.user={}})),Object(x.a)(t,e.login.SUCCESS,(function(e,t){e.user=t.payload.user})),Object(x.a)(t,e.createUser.SUCCESS,(function(e,t){e.user=t.payload.user})),t}}),Z=X.routines;var $=function(){var e=Object(U.d)();return Object(a.useCallback)((function(){e(Z.logout.trigger())}),[e])},Q=n(35),ee=n(267),te=n(146),ne=n(268),ae=function(){return Object(ee.a)("(prefers-color-scheme: dark)")};var re=function(e){var t=e.children,n=Object(ee.a)("(prefers-color-scheme: dark)"),a=r.a.useMemo((function(){return Object(te.a)({palette:{type:n?"dark":"light"}})}),[n]);return r.a.createElement(ne.a,{theme:a},t)},ce=n(14),ie=n(269);function oe(){var e=Object(o.a)(["\n  a {\n    color: inherit;\n    text-decoration: none;\n    &:hover {\n      text-decoration: none;\n    }\n  }\n"]);return oe=function(){return e},e}function ue(){var e=Object(o.a)(["\n  position: relative;\n  ::after {\n    content: '","';\n    position: absolute;\n    left: 10px;\n    top: 10px;\n  }\n"]);return ue=function(){return e},e}var se=Object(ce.a)(ue(),"".concat(Object(ie.a)(Date.now())).padStart(2,"0")),le=Object(ce.a)(oe()),be=function(e){var t=V(),n=Object(u.a)(t,2),c=n[0],i=n[1],o=Object(a.useRef)(),l=G(),d=$(),p=ae();return r.a.createElement(s.a,{color:p?"inherit":"primary",position:"sticky"},r.a.createElement(Y.a,{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},r.a.createElement(K.a,{variant:"h6",noWrap:!0},r.a.createElement(Q.a,{style:{color:"inherit",textDecoration:"none"},to:"/"},"Habit Tracker")),r.a.createElement("div",{style:{flexGrow:1,maxWidth:"960px"}}),r.a.createElement(P,null),r.a.createElement("div",{className:se},r.a.createElement(f.a,{fontSize:"large"})),r.a.createElement(L.a,{edge:"end","aria-label":"account of current user",ref:o,onClick:i,"aria-haspopup":"true",color:"inherit"},r.a.createElement(b.a,null)),r.a.createElement(_.a,{open:c,anchorEl:o.current,transition:!0},(function(e){var t=e.TransitionProps,n=e.placement;return r.a.createElement(q.a,Object.assign({},t,{style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(J.a,null,r.a.createElement(W.a,{onClickAway:i},r.a.createElement(r.a.Fragment,null,!l&&r.a.createElement(z.a,{autoFocusItem:c,id:"menu-list-grow",onKeyDown:i,className:le},r.a.createElement(B.a,{onClick:i},r.a.createElement(Q.a,{component:M.a,to:"/signin"},"Login")),!1),l&&r.a.createElement(z.a,{autoFocusItem:c,id:"menu-list-grow",onKeyDown:i,className:le},r.a.createElement(B.a,{onClick:function(){d(),i()}},"Logout"))))))}))))},de=X.routines;var fe=function(){var e=Object(U.d)();return Object(a.useCallback)((function(t){e(de.login.trigger(t))}),[e])};function pe(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 5px;\n  }\n"]);return pe=function(){return e},e}var me=Object(ce.a)(pe()),ve=function(e){var t=e.className,n=w(),c=n.formState,i=n.updateField,o=fe(),u=Object(a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),o(c)}),[c,o]);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:u,className:Object(ce.b)(me,t)},"Sign In",r.a.createElement(m.a,{type:"email",label:"Email Address",value:c.email||"",name:"email",placeholder:"Email Address",onChange:i}),r.a.createElement(m.a,{type:"password",label:"Password",required:!0,name:"password",value:c.password||"",placeholder:"Your Password",onChange:i}),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Sign in"),r.a.createElement(Q.a,{to:"/signup"},"Sign up here"),r.a.createElement(Q.a,{to:"/passwordreset"},"Forgot Password?")))},he=X.routines;var Oe=function(){var e=Object(U.d)();return Object(a.useCallback)((function(t){var n=t.displayName,a=t.email,r=t.password;e(he.createUser.trigger({displayName:n,email:a,password:r}))}),[e])};function je(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  > * {\n    margin: 10px;\n  }\n"]);return je=function(){return e},e}var xe=Object(ce.a)(je()),Ee=function(e){var t=e.className,n=w(),c=n.formState,i=n.updateField,o=Oe(),u=Object(a.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),o(c)}),[o,c]);return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:u,className:Object(ce.b)(xe,t)},"Sign Up",r.a.createElement(m.a,{type:"text",label:"Display Name",value:c.displayName||"",name:"displayName",placeholder:"Display Name",onChange:i,required:!0}),r.a.createElement(m.a,{type:"email",label:"Email Address",value:c.email||"",name:"email",placeholder:"Email Address",onChange:i,required:!0}),r.a.createElement(m.a,{type:"password",label:"Password",required:!0,name:"password",value:c.password||"",placeholder:"Your Password",onChange:i}),r.a.createElement(p.a,{variant:"contained",color:"primary",type:"submit"},"Sign Up"),r.a.createElement(Q.a,{to:"/signin"},"Sign in here"),r.a.createElement(Q.a,{to:"/passwordreset"},"Forgot Password?")))};var ge=function(){return r.a.createElement("div",null)},we=n(64),ye=n.n(we);n(128);var ke=function(){var e=Object(U.d)();Object(a.useEffect)((function(){ye.a.auth().onAuthStateChanged((function(t){e(X.actions.setCurrentUser({user:t||{}}))}))}),[e])},Se=n(19);n(177);var Ce=function(e){var t=e.path,n=e.children;return G()?r.a.createElement(Se.b,{path:t},n):r.a.createElement(Se.a,{to:"/"})};var Ie=function(e){var t=e.path,n=e.children;return G()?r.a.createElement(Se.a,{to:"/"}):r.a.createElement(Se.b,{path:t},n)},He=n(45),Ne=n.n(He),Ue=Object(D.a)([A],(function(e){return Ne()(e,"userSettings.habitIds",[])})),Re=function(){return Object(U.e)(Ue)},Te=n(276),De=n(277);var Ae=function(e){for(var t=e.month,n=e.year,a=Object(Te.a)(new Date(n,t)),r=Object(De.a)(new Date(n,t,1)),c=[],i=1;i<=a;){var o=[];if(0===c.length)for(var u=0;u<=6;u++)u<r?o.push(-1):(o.push(i),i++);else for(var s=0;s<=6;s++)i<=a?o.push(i):o.push(-1),i++;c.push(o)}return c};function Fe(){var e=Object(o.a)(["\n  background-color: gray;\n  &:hover {\n    opacity: 0.5;\n  }\n"]);return Fe=function(){return e},e}function Ge(){var e=Object(o.a)(["\n  background-color: #282d33;\n  color: white;\n"]);return Ge=function(){return e},e}function Pe(){var e=Object(o.a)(["\n  background-color: rgb(51, 192, 255);\n  &:hover {\n    background-color: rgb(51, 192, 255, 0.5);\n  }\n"]);return Pe=function(){return e},e}function We(){var e=Object(o.a)(["\n  height: 30px;\n  width: 30px;\n  border-radius: 5px;\n  background-color: rgb(220, 220, 220);\n  margin: 5px;\n"]);return We=function(){return e},e}function qe(){var e=Object(o.a)(["\n  &:hover {\n    cursor: pointer;\n    background-color: rgb(180, 180, 180);\n  }\n"]);return qe=function(){return e},e}function Le(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Le=function(){return e},e}var Be=Object(ce.a)(Le()),Me=Object(ce.a)(qe()),ze=Object(ce.a)(We()),Je=Object(ce.a)(Pe()),_e=Object(ce.a)(Ge()),Ke=Object(ce.a)(Fe());var Ye=function(e){var t=e.week,n=void 0===t?[]:t,a=e.onDayClick,c=e.history,i=ae();return r.a.createElement("div",{className:Object(ce.b)(Be)},n.map((function(e,t){var n=e>0?function(){return a&&a(e)}:S.a,o=Object(ce.b)(ze,i&&_e,e>0&&Me,c[e]&&!i&&Je,c[e]&&i&&Ke);return r.a.createElement("div",{key:"".concat(e,"-").concat(t),className:o,onClick:n},e>0?e:"")})))};var Ve=function(e){return e.habits},Xe=function(e){return Object(D.a)([Ve],(function(t){return t[e]}))},Ze=function(e){return Object(U.e)(Xe(e))};var $e=function(e){var t=e.month,n=e.year,c=e.habitId,i=Object(a.useMemo)((function(){return Ae({month:t,year:n})}),[t,n]),o=Object(U.d)(),u=Object(a.useCallback)((function(e){o(N.routines.updateHistory.trigger({day:e,month:t,year:n,habitId:c}))}),[o,c,t,n]),s=Ze(c).history,l=void 0===s?{}:s;return r.a.createElement("div",null,i.map((function(e,a){return r.a.createElement(Ye,{week:e,key:a,onDayClick:u,history:Ne()(l,[n,t],{})})})))},Qe=n(280),et=n(144),tt=n.n(et),nt=n(278),at=n(279),rt=n(141),ct=n.n(rt),it=n(142),ot=n.n(it);function ut(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return ut=function(){return e},e}function st(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return st=function(){return e},e}var lt=Object(ce.a)(st()),bt=Object(ce.a)(ut()),dt=[{name:"January"},{name:"February"},{name:"March"},{name:"April"},{name:"May"},{name:"June"},{name:"July"},{name:"August"},{name:"September"},{name:"October"},{name:"November"},{name:"December"}];var ft=function(e){var t=e.children,n=e.currentMonth,c=void 0===n?Object(nt.a)(Date.now()):n,i=e.currentYear,o=void 0===i?Object(at.a)(Date.now()):i,s=Object(a.useState)(c),l=Object(u.a)(s,2),b=l[0],d=l[1],f=Object(a.useState)(o),p=Object(u.a)(f,2),m=p[0],v=p[1],h=Object(a.useCallback)((function(){var e=b-1;e<0&&(e=11,v(m-1));d(e)}),[b,m]),O=Object(a.useCallback)((function(){var e=b+1;e>11&&(e=0,v(m+1));d(e)}),[b,m]);return r.a.createElement("div",{className:lt},r.a.createElement("div",{className:bt},r.a.createElement(L.a,{size:"small",onClick:h},r.a.createElement(ct.a,null)),r.a.createElement(L.a,{size:"small",onClick:O},r.a.createElement(ot.a,null)),r.a.createElement(K.a,{variant:"h6",noWrap:!0},dt[b].name," ",m)),r.a.createElement("div",null,t({month:b,year:m})))},pt=n(286),mt=n(149),vt=n(143),ht=n.n(vt),Ot=N.routines;var jt=function(e){var t=Object(U.d)();return Object(a.useCallback)((function(){t(Ot.deleteHabit.trigger({habitId:e}))}),[t,e])},xt=N.routines;var Et=function(){var e=Object(U.d)();return Object(a.useCallback)((function(t){var n=t.id,a=t.habit.name;e(xt.updateHabit.trigger({id:n,habit:{name:a}}))}),[e])},gt=function(e){var t=e.habitId,n=e.isOpen,a=e.setIsRenameOpen,c=Ze(t),i=w(),o=i.formState,u=i.updateField,s=i.resetForm,l=Et();return r.a.createElement(v.a,{open:n,onClose:function(){return a(!1)},"aria-labelledby":"update-dialog"},r.a.createElement(j.a,{id:"update-dialog"},"Update Habit Name - ",c.name),r.a.createElement(O.a,null,r.a.createElement(m.a,{autoFocus:!0,margin:"dense",id:"habitName",name:"habitName",value:o.habitName||"",onChange:u,label:"Habit Name",type:"text",fullWidth:!0})),r.a.createElement(h.a,null,r.a.createElement(p.a,{onClick:function(){return a(!1)},color:"primary"},"Cancel"),r.a.createElement(p.a,{onClick:function(e){l({id:t,habit:{name:o.habitName}}),s(),a(!1)},color:"primary"},"Update Name")))},wt=function(e){var t=e.isOpen,n=e.deleteHabit,a=e.closeDialog;return r.a.createElement(v.a,{open:t,onClose:function(){a()},"aria-labelledby":"update-dialog"},r.a.createElement(j.a,{id:"update-dialog"},"Delete Habit"),r.a.createElement(O.a,null,"Are you sure you want to delete this habit?"),r.a.createElement(h.a,null,r.a.createElement(p.a,{onClick:function(){a()}},"Cancel"),r.a.createElement(p.a,{onClick:function(e){n(),a()}},"Delete")))},yt=function(e){var t=e.habitId,n=Ze(t),c=Object(a.useRef)(),i=Object(a.useState)(!1),o=Object(u.a)(i,2),s=o[0],l=o[1],b=function(){return l(!1)},d=Object(a.useState)(!1),f=Object(u.a)(d,2),p=f[0],m=f[1],v=Object(a.useState)(!1),h=Object(u.a)(v,2),O=h[0],j=h[1],x=jt(t);return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(L.a,{ref:c,edge:"end","aria-label":"options for habit",onClick:function(){return l(!0)}},r.a.createElement(ht.a,null)),r.a.createElement(mt.a,{id:"simple-menu",anchorEl:c.current,keepMounted:!0,open:s,onClose:b},r.a.createElement(B.a,{onClick:function(){m(!0),b()}},"Rename"),r.a.createElement(B.a,{onClick:function(){j(!0),b()}},"Delete")),r.a.createElement(gt,{isOpen:p,habitId:t,setIsRenameOpen:m}),r.a.createElement(wt,{isOpen:O,deleteHabit:x,closeDialog:function(){return j(!1)}})):null},kt=n(285),St=N.routines;var Ct=function(){var e=Object(U.d)();return Object(a.useCallback)((function(t){var n=t.firstHabitId,a=t.secondHabitId;e(St.swapHabit.trigger({firstHabitId:n,secondHabitId:a}))}),[e])};function It(){var e=Object(o.a)(["\n  opacity: 0.5;\n"]);return It=function(){return e},e}function Ht(){var e=Object(o.a)(["\n  opacity: 0.8;\n"]);return Ht=function(){return e},e}var Nt=Object(ce.a)(Ht()),Ut=Object(ce.a)(It()),Rt=function(e){var t,n=e.habitId,a=Ct(),c=Object(kt.a)({accept:"habit",canDrop:function(e){return"habit"===e.type&&e.id!==n},drop:function(e,t){var r=e.id;"habit"===e.type&&a({firstHabitId:r,secondHabitId:n})},collect:function(e){return{canDrop:e.canDrop(),isHovering:e.isOver()}}}),i=Object(u.a)(c,2),o=i[0],s=i[1];return r.a.createElement("div",{ref:s,className:Object(ce.b)((t={},Object(x.a)(t,Ut,o.canDrop),Object(x.a)(t,Nt,o.isHovering&&o.canDrop),t))},e.children)};function Tt(){var e=Object(o.a)(["\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  max-width: 18ch;\n"]);return Tt=function(){return e},e}function Dt(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return Dt=function(){return e},e}function At(){var e=Object(o.a)(["\n  flex-grow: 1;\n"]);return At=function(){return e},e}function Ft(){var e=Object(o.a)(["\n  margin: 8px;\n  padding: 16px;\n  text-transform: capitalize;\n  position: relative;\n"]);return Ft=function(){return e},e}var Gt=Object(ce.a)(Ft()),Pt=Object(ce.a)(At()),Wt=Object(ce.a)(Dt()),qt=Object(ce.a)(Tt()),Lt=function(e){var t=e.habitId,n=e.order,a=Ze(t),c=Object(pt.a)({item:{id:t,type:"habit",order:n}}),i=Object(u.a)(c,3),o=i[1],s=i[2];if(!a)return null;var l=a.name;return r.a.createElement(Rt,{habitId:t},r.a.createElement(Qe.a,{className:Gt,ref:s},r.a.createElement("div",{className:Wt},r.a.createElement(L.a,{ref:o,edge:"start","aria-label":"drag drop indicator for reordering habits"},r.a.createElement(tt.a,null)),r.a.createElement(K.a,{variant:"h6",className:qt},l),r.a.createElement("div",{className:Pt}),r.a.createElement(yt,{habitId:t})),r.a.createElement(ft,null,(function(e){var n=e.month,a=e.year;return r.a.createElement($e,{month:n,year:a,habitId:t})}))))},Bt=n(109);function Mt(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  max-width: 1000px;\n  align-items: center;\n  @media only screen and (max-width: 1000px) {\n    justify-content: center;\n  }\n"]);return Mt=function(){return e},e}var zt=Object(ce.a)(Mt()),Jt=function(){var e=Re();return r.a.createElement(r.a.Fragment,null,e.length>0&&r.a.createElement(Bt.b,{flipKey:e.join("")},r.a.createElement("div",{className:zt},e.map((function(e,t){return r.a.createElement(Bt.a,{key:e,flipId:e},r.a.createElement("div",null,r.a.createElement(Lt,{habitId:e,order:t})))})))))};var _t=function(){return r.a.createElement("div",null,r.a.createElement(K.a,{variant:"h1"},"Habit Tracker"),r.a.createElement(K.a,{variant:"h4"},"A Simple Habit Tracker App"),r.a.createElement(K.a,{variant:"h5"},"Login To Begin"))};function Kt(){var e=Object(o.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]);return Kt=function(){return e},e}var Yt=Object(ce.a)(Kt());var Vt=function(){ke();var e=G();return r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null),r.a.createElement("div",null,r.a.createElement(Se.d,null,r.a.createElement(Ie,{path:"/signin"},r.a.createElement(ve,null)),r.a.createElement(Ie,{path:"/signup"},r.a.createElement(Ee,null)),r.a.createElement(Ie,{path:"/passwordreset"},r.a.createElement("div",null,"WIP")),r.a.createElement(Ce,{path:"/profile"},r.a.createElement(ge,null)),r.a.createElement(Se.b,{path:"/"},r.a.createElement("div",{className:Yt},e?r.a.createElement(Jt,null):r.a.createElement(_t,null))))))},Xt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Zt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var $t=n(132),Qt=n(58),en=n(59),tn=n(7),nn=n.n(tn),an=n(4),rn=n(24);n(219);ye.a.initializeApp({apiKey:"AIzaSyAz2bDKjUq8xaRJba2qF5JdTnbctXnkxZ4",authDomain:"habit-tracker-9e016.firebaseapp.com",databaseURL:"https://habit-tracker-9e016.firebaseio.com",projectId:"habit-tracker-9e016",storageBucket:"habit-tracker-9e016.appspot.com",messagingSenderId:"13324547217",appId:'1:13324547217:web:c21e824ec11e0271523b30"'});var cn=ye.a.auth(),on=ye.a.firestore();function un(){return(un=Object(rn.a)(nn.a.mark((function e(t){var n,a;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,e.next=3,cn.signInWithEmailAndPassword(n,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var sn=function(e){return un.apply(this,arguments)},ln=n(27),bn=nn.a.mark(dn);function dn(e){var t,n,a,r,c;return nn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.email,a=t.password,i.prev=1,i.next=4,Object(an.f)(X.routines.login.request());case 4:return i.next=6,Object(an.b)(sn,{email:n,password:a});case 6:return r=i.sent,c=r.user,i.next=10,Object(an.f)(X.routines.login.success({user:c}));case 10:return i.next=12,Object(an.f)(Object(ln.d)("/"));case 12:i.next=19;break;case 14:return i.prev=14,i.t0=i.catch(1),console.error(i.t0),i.next=19,Object(an.f)(X.routines.login.failure(i.t0));case 19:return i.prev=19,i.next=22,Object(an.f)(X.routines.login.fulfill());case 22:return i.finish(19);case 23:case"end":return i.stop()}}),bn,null,[[1,14,19,23]])}var fn=dn;function pn(e){return mn.apply(this,arguments)}function mn(){return(mn=Object(rn.a)(nn.a.mark((function e(t){var n,a;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("User does not exist");case 2:return n=on.doc("users/".concat(t.uid)),e.next=5,n.get();case 5:if(e.sent.exists){e.next=11;break}return a={habitIds:[]},e.next=10,n.set(a);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(){return(vn=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c,i;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.email,a=t.password,r=t.displayName,e.next=3,cn.createUserWithEmailAndPassword(n,a);case 3:return c=e.sent,(i=c.user).updateProfile({displayName:r}),pn(i),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var hn=function(e){return vn.apply(this,arguments)},On=nn.a.mark(jn);function jn(e){var t,n,a,r,c;return nn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.displayName,a=t.email,r=t.password,i.prev=1,i.next=4,Object(an.f)(X.routines.createUser.request());case 4:return i.next=6,Object(an.b)(hn,{email:a,password:r,displayName:n});case 6:return c=i.sent,i.next=9,Object(an.f)(X.routines.createUser.success({user:c}));case 9:return i.next=11,Object(an.f)(Object(ln.d)("/"));case 11:i.next=18;break;case 13:return i.prev=13,i.t0=i.catch(1),console.error(i.t0),i.next=18,Object(an.f)(X.routines.createUser.failure(i.t0));case 18:return i.prev=18,i.next=21,Object(an.f)(X.routines.createUser.fulfill());case 21:return i.finish(18);case 22:case"end":return i.stop()}}),On,null,[[1,13,18,22]])}var xn=jn;var En=function(){return cn.signOut()},gn=nn.a.mark(wn);function wn(){return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(an.f)(X.routines.logout.request());case 3:return e.next=5,Object(an.b)(En);case 5:return e.next=7,Object(an.f)(X.routines.logout.success());case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.next=14,Object(an.f)(X.routines.logout.failure(e.t0));case 14:return e.prev=14,e.next=17,Object(an.f)(X.routines.logout.fulfill());case 17:return e.finish(14);case 18:case"end":return e.stop()}}),gn,null,[[0,9,14,18]])}var yn=wn,kn=Object(D.a)(A,(function(e){return Ne()(e,"user.uid",void 0)})),Sn=nn.a.mark(Nn),Cn=nn.a.mark(Un),In=nn.a.mark(Rn);function Hn(e){var t=e.userId;return Object(en.b)((function(e){return on.doc("users/".concat(t)).onSnapshot((function(n){e({data:n.data(),userId:t})}))}))}function Nn(){var e,t,n,a;return nn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(an.h)(kn);case 2:return e=r.sent,r.next=5,Object(an.b)(Hn,{userId:e});case 5:t=r.sent,r.prev=6;case 7:return r.next=10,Object(an.j)(t);case 10:return n=r.sent,a=n.data,r.next=14,Object(an.f)(X.actions.setUserSettings({userSettings:a}));case 14:r.next=7;break;case 16:return r.prev=16,r.next=19,Object(an.d)();case 19:if(!r.sent){r.next=21;break}t.close();case 21:return r.finish(16);case 22:case"end":return r.stop()}}),Sn,null,[[6,,16,22]])}function Un(e){var t;return nn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(an.e)(Nn,e);case 2:return t=n.sent,n.next=5,Object(an.j)(X.routines.logout.SUCCESS);case 5:if(n.sent.type!==X.routines.logout.SUCCESS){n.next=9;break}return n.next=9,Object(an.c)(t);case 9:case"end":return n.stop()}}),Cn)}function Rn(){return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.l)([X.actions.setCurrentUser,X.routines.login.SUCCESS,X.routines.createUser.SUCCESS],Un);case 2:case"end":return e.stop()}}),In)}var Tn=nn.a.mark(Dn);function Dn(){return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.k)(X.routines.login.TRIGGER,fn);case 2:return e.next=4,Object(an.k)(X.routines.logout.TRIGGER,yn);case 4:return e.next=6,Object(an.k)(X.routines.createUser.TRIGGER,xn);case 6:return e.next=8,Object(an.e)(Rn);case 8:case"end":return e.stop()}}),Tn)}var An=Dn,Fn=n(95);function Gn(){return(Gn=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c,i,o,u;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.habitName,r=t.options,c=void 0===r?{}:r,i=on.collection("users").doc(n),o=on.collection("habits").doc(),u=o.id,e.next=6,on.runTransaction(function(){var e=Object(rn.a)(nn.a.mark((function e(t){var r,s;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(i);case 2:r=e.sent,s=r.data(),t.set(o,Object(E.a)({name:a,userId:n,archived:!1},c)),t.update(i,{habitIds:[].concat(Object(Fn.a)(s.habitIds),[u])});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:return e.t0=u,e.next=9,on.collection("habits").doc(u).get();case 9:return e.t1=e.sent.data(),e.abrupt("return",[e.t0,e.t1]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Pn=function(e){return Gn.apply(this,arguments)},Wn=nn.a.mark(qn);function qn(e){var t,n,a,r,c,i,o,s,l;return nn.a.wrap((function(b){for(;;)switch(b.prev=b.next){case 0:return t=e.payload,n=t.habitName,a=t.options,r=void 0===a?{}:a,b.next=3,Object(an.h)(kn);case 3:return c=b.sent,b.prev=4,b.next=7,Object(an.f)(N.routines.createHabit.request());case 7:return b.next=9,Object(an.b)(Pn,{userId:c,habitName:n,options:r});case 9:return i=b.sent,o=Object(u.a)(i,2),s=o[0],l=o[1],b.next=15,Object(an.f)(N.routines.createHabit.success({habit:l,id:s}));case 15:b.next=22;break;case 17:return b.prev=17,b.t0=b.catch(4),console.error(b.t0),b.next=22,Object(an.f)(N.routines.createHabit.failure(b.t0));case 22:return b.prev=22,b.next=25,Object(an.f)(N.routines.createHabit.fulfill());case 25:return b.finish(22);case 26:case"end":return b.stop()}}),Wn,null,[[4,17,22,26]])}var Ln=qn;function Bn(){return(Bn=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=t.habit,r=on.collection("habits").doc(n),c=Object(E.a)({},a),e.next=5,r.set(c,{merge:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mn=function(e){return Bn.apply(this,arguments)},zn=nn.a.mark(Jn);function Jn(e){var t,n,a;return nn.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.id,a=t.habit,r.prev=1,r.next=4,Object(an.f)(N.routines.updateHabit.request());case 4:return r.next=6,Object(an.b)(Mn,{id:n,habit:a});case 6:return r.next=8,Object(an.f)(N.routines.updateHabit.success({id:n,updatedHabitProperties:a}));case 8:r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(1),console.error(r.t0),r.next=15,Object(an.f)(N.routines.updateHabit.failure(r.t0));case 15:return r.prev=15,r.next=18,Object(an.f)(N.routines.updateHabit.fulfill());case 18:return r.finish(15);case 19:case"end":return r.stop()}}),zn,null,[[1,10,15,19]])}var _n=Jn;function Kn(){return(Kn=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c,i,o,u;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.year,a=t.month,r=t.day,c=t.habitId,i=t.newValue,o=on.collection("habits").doc(c),u={history:Object(x.a)({},n,Object(x.a)({},a,Object(x.a)({},r,i)))},e.next=5,o.set(u,{merge:!0});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yn=function(e){return Kn.apply(this,arguments)},Vn=nn.a.mark(Xn);function Xn(e){var t,n,a,r,c,i,o,u,s;return nn.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.day,a=t.month,r=t.year,c=t.habitId,l.prev=1,l.next=4,Object(an.f)(N.routines.updateHistory.request());case 4:return l.next=6,Object(an.h)(Xe(c));case 6:return i=l.sent,o=i.history,u=void 0===o?{}:o,s=Ne()(u,[r,a,n],!1),l.next=11,Object(an.b)(Yn,{year:r,month:a,day:n,habitId:c,newValue:!s});case 11:return l.next=13,Object(an.f)(N.routines.updateHistory.success());case 13:l.next=20;break;case 15:return l.prev=15,l.t0=l.catch(1),console.error(l.t0),l.next=20,Object(an.f)(N.routines.updateHistory.failure(l.t0));case 20:return l.prev=20,l.next=23,Object(an.f)(N.routines.updateHistory.fulfill());case 23:return l.finish(20);case 24:case"end":return l.stop()}}),Vn,null,[[1,15,20,24]])}var Zn=Xn,$n=nn.a.mark(na),Qn=nn.a.mark(aa),ea=nn.a.mark(ra);function ta(e){var t=e.userId;return Object(en.b)((function(e){return on.collection("habits").where("userId","==",t).where("archived","==",!1).onSnapshot((function(t){t.docChanges().forEach((function(t){e({type:t.type,data:t.doc.data(),id:t.doc.id})}))}))}))}function na(e){var t,n,a,r,c,i;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.h)(kn);case 2:return t=e.sent,e.next=5,Object(an.b)(ta,{userId:t});case 5:n=e.sent,e.prev=6;case 7:return e.next=10,Object(an.j)(n);case 10:a=e.sent,r=a.data,c=a.id,i=a.type,e.t0=i,e.next="added"===e.t0?17:"modified"===e.t0?20:"removed"===e.t0?23:26;break;case 17:return e.next=19,Object(an.f)(N.actions.addHabit({habit:r,id:c}));case 19:return e.abrupt("break",27);case 20:return e.next=22,Object(an.f)(N.actions.updateHabit({habit:r,id:c}));case 22:return e.abrupt("break",27);case 23:return e.next=25,Object(an.f)(N.actions.deleteHabit({habit:r,id:c}));case 25:case 26:return e.abrupt("break",27);case 27:e.next=7;break;case 29:return e.prev=29,e.next=32,Object(an.d)();case 32:if(!e.sent){e.next=34;break}n.close();case 34:return e.finish(29);case 35:case"end":return e.stop()}}),$n,null,[[6,,29,35]])}function aa(e){var t;return nn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(an.e)(na,e);case 2:return t=n.sent,n.next=5,Object(an.j)(X.routines.logout.SUCCESS);case 5:if(n.sent.type!==X.routines.logout.SUCCESS){n.next=9;break}return n.next=9,Object(an.c)(t);case 9:case"end":return n.stop()}}),Qn)}function ra(){return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.l)([X.actions.setCurrentUser,X.routines.login.SUCCESS,X.routines.createUser.SUCCESS],aa);case 2:case"end":return e.stop()}}),ea)}var ca=ra;function ia(){return(ia=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.habitId,r=on.collection("users").doc(n),c=on.collection("habits").doc(a),e.next=5,on.runTransaction(function(){var e=Object(rn.a)(nn.a.mark((function e(t){var n,i,o;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(r);case 2:n=e.sent,i=n.data(),t.delete(c),o=i.habitIds.filter((function(e){return e!==a})),t.update(r,{habitIds:o});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var oa=function(e){return ia.apply(this,arguments)},ua=nn.a.mark(sa);function sa(e){var t,n;return nn.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.habitId,a.next=3,Object(an.h)(kn);case 3:return n=a.sent,a.prev=4,a.next=7,Object(an.f)(N.routines.deleteHabit.request());case 7:return a.next=9,Object(an.b)(oa,{userId:n,habitId:t});case 9:return a.next=11,Object(an.f)(N.routines.deleteHabit.success({id:t}));case 11:a.next=18;break;case 13:return a.prev=13,a.t0=a.catch(4),console.error(a.t0),a.next=18,Object(an.f)(N.routines.deleteHabit.failure(a.t0));case 18:return a.prev=18,a.next=21,Object(an.f)(N.routines.deleteHabit.fulfill());case 21:return a.finish(18);case 22:case"end":return a.stop()}}),ua,null,[[4,13,18,22]])}var la=sa;function ba(){return(ba=Object(rn.a)(nn.a.mark((function e(t){var n,a,r,c;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.userId,a=t.firstHabitId,r=t.secondHabitId,c=on.collection("users").doc(n),e.next=4,on.runTransaction(function(){var e=Object(rn.a)(nn.a.mark((function e(t){var n,i,o,u,s;return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(c);case 2:if(n=e.sent,(i=n.data())&&i.habitIds.includes(a)&&i.habitIds.includes(r)){e.next=6;break}throw new Error("habit does not exist, cannot move the habit");case 6:return o=Object(Fn.a)(i.habitIds),u=o.indexOf(a),s=o.indexOf(r),o[u]=r,o[s]=a,e.next=13,t.update(c,{habitIds:o});case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var da=function(e){return ba.apply(this,arguments)},fa=nn.a.mark(pa);function pa(e){var t,n,a,r,c;return nn.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.firstHabitId,a=t.secondHabitId,i.next=3,Object(an.h)(kn);case 3:return r=i.sent,i.prev=4,i.next=7,Object(an.f)(N.routines.swapHabit.request());case 7:return i.next=9,Object(an.b)(da,{userId:r,firstHabitId:n,secondHabitId:a});case 9:return c=i.sent,i.next=12,Object(an.f)(N.routines.swapHabit.success({habitIds:c}));case 12:i.next=19;break;case 14:return i.prev=14,i.t0=i.catch(4),console.error(i.t0),i.next=19,Object(an.f)(N.routines.swapHabit.failure(i.t0));case 19:return i.prev=19,i.next=22,Object(an.f)(N.routines.swapHabit.fulfill());case 22:return i.finish(19);case 23:case"end":return i.stop()}}),fa,null,[[4,14,19,23]])}var ma=pa,va=nn.a.mark(ha);function ha(){return nn.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(an.k)(N.routines.createHabit.TRIGGER,Ln);case 2:return e.next=4,Object(an.k)(N.routines.updateHabit.TRIGGER,_n);case 4:return e.next=6,Object(an.k)(N.routines.updateHistory.TRIGGER,Zn);case 6:return e.next=8,Object(an.k)(N.routines.deleteHabit.TRIGGER,la);case 8:return e.next=10,Object(an.k)(N.routines.swapHabit.TRIGGER,ma);case 10:return e.next=12,Object(an.e)(ca);case 12:case"end":return e.stop()}}),va)}var Oa=ha,ja=nn.a.mark(xa);function xa(){var e;return nn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[An,Oa,I.c],t.next=3,Object(an.a)(e.map((function(e){return Object(an.i)(nn.a.mark((function t(){return nn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,t.next=4,Object(an.b)(e);case 4:return t.abrupt("break",12);case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:t.next=0;break;case 12:case"end":return t.stop()}}),t,null,[[1,7]])})))})));case 3:case"end":return t.stop()}}),ja)}var Ea=xa,ga=function(e){var t=e.initialState,n=void 0===t?{}:t,a=e.history,r=Object(en.a)(),c=[r,Object($t.a)(a)],i=Object(C.a)({reducer:{session:X.reducer,habits:N.reducer,router:Object(Qt.b)(a)},middleware:c,preloadedState:n});return r.run(Ea),i},wa=n(282),ya=n(145),ka=n(31),Sa=n(147),Ca=Object(ka.b)();document.addEventListener("DOMContentLoaded",(function(){var e=ga({history:Ca});return i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U.a,{store:e},r.a.createElement(Sa.a,{options:ya.a},r.a.createElement(Qt.a,{history:Ca},r.a.createElement(re,null,r.a.createElement(wa.a,null),r.a.createElement(Vt,null)))))),document.getElementById("root"))})),function(e){if("serviceWorker"in navigator){if(new URL("https://aarronlee.com/habit-tracker",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("https://aarronlee.com/habit-tracker","/service-worker.js");Xt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Zt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Zt(t,e)}))}}()}},[[164,1,2]]]);
//# sourceMappingURL=main.75d68fda.chunk.js.map